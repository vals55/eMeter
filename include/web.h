#ifndef __WEB_H
#define __WEB_H
#include <avr/pgmspace.h>

extern bool startWeb();
extern bool stopWeb();
extern void handleWeb();
extern void startOTA();

const char HTTP_HEADER_MAIN[] PROGMEM = "<!DOCTYPE html><html lang='en'><head><meta name='format-detection' content='telephone=no'><meta charset='UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1,user-scalable=no'/><title>eMeter</title>";
const char HTTP_SCRIPT_MAIN[] PROGMEM = "<script>"
"function _(b){return document.getElementById(b)}function send(url,milli,_process){const xhr=new XMLHttpRequest();xhr.open('GET',url);xhr.timeout=milli;xhr.onreadystatechange=function(a){if(xhr.readyState===4 && xhr.status===200){_process(xhr.responseText)}};xhr.send()}window.onload=function(){function _refresh(){function _process(msg){var obj=JSON.parse(msg);Object.keys(obj).forEach(function(id){if(id.startsWith('inner')){var t=id.slice(6);if(_(t)){_(t).innerHTML=obj[id];}}if(id.startsWith('value')){var t = id.slice(6);if(_(t)){_(t).value=obj[id];}}if(id.startsWith('style')){var t = id.slice(6);if(_(t)){_(t).style=obj[id];}}if(id.startsWith('oncli')){var t = id.slice(6);if(_(t)){_(t).setAttribute('onClick',obj[id]);}}})}send('/states',500,_process);}_refresh();var d=setInterval(_refresh,1000);}"
"</script>";
const char HTTP_SCRIPT2_MAIN[] PROGMEM = ""
#ifndef NOCHARTS
//"<script type='text/javascript' src='http://github.com/joewalnes/smoothie/raw/master/smoothie.js'>"
"<script>"
"!function(t){Date.now=Date.now||function(){return(new Date).getTime()};var e={extend:function(){arguments[0]=arguments[0]||{};for(var t=1;t<arguments.length;t++)for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&('object'==typeof arguments[t][i]?arguments[t][i]instanceof Array?arguments[0][i]=arguments[t][i]:arguments[0][i]=e.extend(arguments[0][i],arguments[t][i]):arguments[0][i]=arguments[t][i]);return arguments[0]},binarySearch:function(t,e){for(var i=0,s=t.length;i<s;){var a=i+s>>1;e<t[a][0]?s=a:i=a+1}return i},pixelSnap:function(t,e){return e%2==0?Math.round(t):Math.floor(t)+.5}};function i(t){this.options=e.extend({},i.defaultOptions,t),this.disabled=!1,this.clear()}function s(t){this.options=e.extend({},s.defaultChartOptions,t),this.seriesSet=[],this.currentValueRange=1,this.currentVisMinValue=0,this.lastRenderTimeMillis=0,this.lastChartTimestamp=0,this.mousemove=this.mousemove.bind(this),this.mouseout=this.mouseout.bind(this)}i.defaultOptions={resetBoundsInterval:3e3,resetBounds:!0},i.prototype.clear=function(){this.data=[],this.maxValue=Number.NaN,this.minValue=Number.NaN},i.prototype.resetBounds=function(){if(this.data.length){this.maxValue=this.data[0][1],this.minValue=this.data[0][1];for(var t=1;t<this.data.length;t++){var e=this.data[t][1];e>this.maxValue&&(this.maxValue=e),e<this.minValue&&(this.minValue=e)}}else this.maxValue=Number.NaN,this.minValue=Number.NaN},i.prototype.append=function(t,e,i){if(!isNaN(t)&&!isNaN(e)){var s=this.data.length-1;if(s>=0)for(var a=s;;){var n=this.data[a];if(t>=n[0]){t===n[0]?i?(n[1]+=e,e=n[1]):n[1]=e:this.data.splice(a+1,0,[t,e]);break}if(--a<0){this.data.splice(0,0,[t,e]);break}}else this.data.push([t,e]);this.maxValue=isNaN(this.maxValue)?e:Math.max(this.maxValue,e),this.minValue=isNaN(this.minValue)?e:Math.min(this.minValue,e)}},i.prototype.dropOldData=function(t,e){for(var i=0;this.data.length-i>=e&&this.data[i+1][0]<t;)i++;0!==i&&this.data.splice(0,i)},s.tooltipFormatter=function(t,e){var i,a=this.options.timestampFormatter||s.timeFormatter,n=document.createElement('div');n.appendChild(document.createTextNode(a(new Date(t))));for(var o=0;o<e.length;++o){''!==(i=e[o].series.options.tooltipLabel||'')&&(i+=' ');var r=document.createElement('span');r.style.color=e[o].series.options.strokeStyle,r.appendChild(document.createTextNode(i+this.options.yMaxFormatter(e[o].value,this.options.labels.precision))),n.appendChild(document.createElement('br')),n.appendChild(r)}return n.innerHTML},s.defaultChartOptions={millisPerPixel:20,enableDpiScaling:!0,yMinFormatter:function(t,e){return parseFloat(t).toFixed(e)},yMaxFormatter:function(t,e){return parseFloat(t).toFixed(e)},yIntermediateFormatter:function(t,e){return parseFloat(t).toFixed(e)},maxValueScale:1,minValueScale:1,interpolation:'bezier',scaleSmoothing:.125,maxDataSetLength:2,scrollBackwards:!1,displayDataFromPercentile:1,grid:{fillStyle:'#000000',strokeStyle:'#777777',lineWidth:2,millisPerLine:1e3,verticalSections:2,borderVisible:!0},labels:{fillStyle:'#ffffff',disabled:!1,fontSize:10,fontFamily:'monospace',precision:2,showIntermediateLabels:!1,intermediateLabelSameAxis:!0},title:{text:'',fillStyle:'#ffffff',fontSize:15,fontFamily:'monospace',verticalAlign:'middle'},horizontalLines:[],tooltip:!1,tooltipLine:{lineWidth:1,strokeStyle:'#BBBBBB'},tooltipFormatter:s.tooltipFormatter,nonRealtimeData:!1,responsive:!1,limitFPS:0},s.AnimateCompatibility={requestAnimationFrame:function(t,e){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout((function(){t(Date.now())}),16)};return i.call(window,t,e)},cancelAnimationFrame:function(t){var e=window.cancelAnimationFrame||function(t){clearTimeout(t)};return e.call(window,t)}},s.defaultSeriesPresentationOptions={lineWidth:1,strokeStyle:'#ffffff',fillToBottom:!0},s.prototype.addTimeSeries=function(t,i){this.seriesSet.push({timeSeries:t,options:e.extend({},s.defaultSeriesPresentationOptions,i)}),t.options.resetBounds&&t.options.resetBoundsInterval>0&&(t.resetBoundsTimerId=setInterval((function(){t.resetBounds()}),t.options.resetBoundsInterval))},s.prototype.removeTimeSeries=function(t){for(var e=this.seriesSet.length,i=0;i<e;i++)if(this.seriesSet[i].timeSeries===t){this.seriesSet.splice(i,1);break}t.resetBoundsTimerId&&clearInterval(t.resetBoundsTimerId)},s.prototype.getTimeSeriesOptions=function(t){for(var e=this.seriesSet.length,i=0;i<e;i++)if(this.seriesSet[i].timeSeries===t)return this.seriesSet[i].options},s.prototype.bringToFront=function(t){for(var e=this.seriesSet.length,i=0;i<e;i++)if(this.seriesSet[i].timeSeries===t){var s=this.seriesSet.splice(i,1);this.seriesSet.push(s[0]);break}},s.prototype.streamTo=function(t,e){this.canvas=t,this.clientWidth=parseInt(this.canvas.getAttribute('width')),this.clientHeight=parseInt(this.canvas.getAttribute('height')),this.delay=e,this.start()},s.prototype.getTooltipEl=function(){return this.tooltipEl||(this.tooltipEl=document.createElement('div'),this.tooltipEl.className='smoothie-chart-tooltip',this.tooltipEl.style.pointerEvents='none',this.tooltipEl.style.position='absolute',this.tooltipEl.style.display='none',document.body.appendChild(this.tooltipEl)),this.tooltipEl},s.prototype.updateTooltip=function(){if(this.options.tooltip){var t=this.getTooltipEl();if(this.mouseover&&this.options.tooltip){for(var i=this.lastChartTimestamp,s=this.options.scrollBackwards?i-this.mouseX*this.options.millisPerPixel:i-(this.clientWidth-this.mouseX)*this.options.millisPerPixel,a=[],n=0;n<this.seriesSet.length;n++){var o=this.seriesSet[n].timeSeries;if(!o.disabled){var r=e.binarySearch(o.data,s);r>0&&r<o.data.length&&a.push({series:this.seriesSet[n],index:r,value:o.data[r][1]})}}a.length?(t.innerHTML=this.options.tooltipFormatter.call(this,s,a),t.style.display='block'):t.style.display='none'}else t.style.display='none'}},s.prototype.mousemove=function(t){if(this.mouseover=!0,this.mouseX=t.offsetX,this.mouseY=t.offsetY,this.mousePageX=t.pageX,this.mousePageY=t.pageY,this.options.tooltip){var e=this.getTooltipEl();e.style.top=Math.round(this.mousePageY)+'px',e.style.left=Math.round(this.mousePageX)+'px',this.updateTooltip()}},s.prototype.mouseout=function(){this.mouseover=!1,this.mouseX=this.mouseY=-1,this.tooltipEl&&(this.tooltipEl.style.display='none')},s.prototype.resize=function(){var t,e,i=this.options.enableDpiScaling&&window?window.devicePixelRatio:1;this.options.responsive?(t=this.canvas.offsetWidth,e=this.canvas.offsetHeight,t!==this.lastWidth&&(this.lastWidth=t,this.canvas.setAttribute('width',Math.floor(t*i).toString()),this.canvas.getContext('2d').scale(i,i)),e!==this.lastHeight&&(this.lastHeight=e,this.canvas.setAttribute('height',Math.floor(e*i).toString()),this.canvas.getContext('2d').scale(i,i)),this.clientWidth=t,this.clientHeight=e):(t=parseInt(this.canvas.getAttribute('width')),e=parseInt(this.canvas.getAttribute('height')),1!==i?(Math.floor(this.clientWidth*i)!==t&&(this.canvas.setAttribute('width',Math.floor(t*i).toString()),this.canvas.style.width=t+'px',this.clientWidth=t,this.canvas.getContext('2d').scale(i,i)),Math.floor(this.clientHeight*i)!==e&&(this.canvas.setAttribute('height',Math.floor(e*i).toString()),this.canvas.style.height=e+'px',this.clientHeight=e,this.canvas.getContext('2d').scale(i,i))):(this.clientWidth=t,this.clientHeight=e))},s.prototype.start=function(){if(!this.frame){this.canvas.addEventListener('mousemove',this.mousemove),this.canvas.addEventListener('mouseout',this.mouseout);var t=function(){this.frame=s.AnimateCompatibility.requestAnimationFrame(function(){if(this.options.nonRealtimeData){var e=new Date(0),i=this.seriesSet.reduce(function(t,e){var i=e.timeSeries.data,s=Math.round(this.options.displayDataFromPercentile*i.length)-1;if(s=(s=s>=0?s:0)<=i.length-1?s:i.length-1,i&&i.length>0){var a=i[s][0];t=t>a?t:a}return t}.bind(this),e);this.render(this.canvas,i>e?i:null)}else this.render();t()}.bind(this))}.bind(this);t()}},s.prototype.stop=function(){this.frame&&(s.AnimateCompatibility.cancelAnimationFrame(this.frame),delete this.frame,this.canvas.removeEventListener('mousemove',this.mousemove),this.canvas.removeEventListener('mouseout',this.mouseout))},s.prototype.updateValueRange=function(){for(var t=this.options,e=Number.NaN,i=Number.NaN,s=0;s<this.seriesSet.length;s++){var a=this.seriesSet[s].timeSeries;a.disabled||(isNaN(a.maxValue)||(e=isNaN(e)?a.maxValue:Math.max(e,a.maxValue)),isNaN(a.minValue)||(i=isNaN(i)?a.minValue:Math.min(i,a.minValue)))}if(null!=t.maxValue?e=t.maxValue:e*=t.maxValueScale,null!=t.minValue?i=t.minValue:i-=Math.abs(i*t.minValueScale-i),this.options.yRangeFunction){var n=this.options.yRangeFunction({min:i,max:e});i=n.min,e=n.max}if(!isNaN(e)&&!isNaN(i)){var o=e-i-this.currentValueRange,r=i-this.currentVisMinValue;this.isAnimatingScale=Math.abs(o)>.1||Math.abs(r)>.1,this.currentValueRange+=t.scaleSmoothing*o,this.currentVisMinValue+=t.scaleSmoothing*r}this.valueRange={min:i,max:e}},s.prototype.render=function(t,i){var s=this.options,a=Date.now();if(!(s.limitFPS>0&&a-this.lastRenderTimeMillis<1e3/s.limitFPS)){if(i=(i||a)-(this.delay||0),i-=i%s.millisPerPixel,!this.isAnimatingScale)if(this.lastChartTimestamp===i)if(!(a-this.lastRenderTimeMillis>1e3/6))return;this.lastRenderTimeMillis=a,this.lastChartTimestamp=i,this.resize();var n=(t=t||this.canvas).getContext('2d'),o={top:0,left:0,width:this.clientWidth,height:this.clientHeight},r=i-o.width*s.millisPerPixel,l=function(t,i){var s=t-this.currentVisMinValue,a=0===this.currentValueRange?o.height:o.height*(1-s/this.currentValueRange);return e.pixelSnap(a,i)}.bind(this),h=function(t,a){var n=i/s.millisPerPixel-t/s.millisPerPixel,r=s.scrollBackwards?n:o.width-n;return e.pixelSnap(r,a)};if(this.updateValueRange(),n.font=s.labels.fontSize+'px '+s.labels.fontFamily,n.save(),n.translate(o.left,o.top),n.beginPath(),n.rect(0,0,o.width,o.height),n.clip(),n.save(),n.fillStyle=s.grid.fillStyle,n.clearRect(0,0,o.width,o.height),n.fillRect(0,0,o.width,o.height),n.restore(),n.save(),n.lineWidth=s.grid.lineWidth,n.strokeStyle=s.grid.strokeStyle,s.grid.millisPerLine>0){n.beginPath();for(var m=i-i%s.grid.millisPerLine;m>=r;m-=s.grid.millisPerLine){var d=h(m,s.grid.lineWidth);n.moveTo(d,0),n.lineTo(d,o.height)}n.stroke()}for(var u=1;u<s.grid.verticalSections;u++){var c=e.pixelSnap(u*o.height/s.grid.verticalSections,s.grid.lineWidth);n.beginPath(),n.moveTo(0,c),n.lineTo(o.width,c),n.stroke()}if(s.grid.borderVisible&&n.strokeRect(0,0,o.width,o.height),n.restore(),s.horizontalLines&&s.horizontalLines.length)for(var p=0;p<s.horizontalLines.length;p++){var f=s.horizontalLines[p],v=f.lineWidth||1,g=l(f.value,v);n.strokeStyle=f.color||'#ffffff',n.lineWidth=v,n.beginPath(),n.moveTo(0,g),n.lineTo(o.width,g),n.stroke()}for(var S=0;S<this.seriesSet.length;S++){var y=this.seriesSet[S].timeSeries,x=y.data;if(y.dropOldData(r,s.maxDataSetLength),!(x.length<=1||y.disabled)){n.save();var w=this.seriesSet[S].options,b=w.strokeStyle&&'none'!==w.strokeStyle,T=b?w.lineWidth:0;n.beginPath();var N,V=h(x[0][0],T),F=l(x[0][1],T),k=V,P=F;switch(n.moveTo(V,F),w.interpolation||s.interpolation){case'linear':case'line':N=function(t,e,i,s){n.lineTo(t,e)};break;case'bezier':default:N=function(t,e,i,s){n.bezierCurveTo(Math.round((i+t)/2),s,Math.round(i+t)/2,e,t,e)};break;case'step':N=function(t,e,i,s){n.lineTo(t,s),n.lineTo(t,e)}}for(var M=1;M<x.length;M++){var B=x[M],R=h(B[0],T),A=l(B[1],T);N(R,A,k,P),k=R,P=A}if(b&&(n.lineWidth=w.lineWidth,n.strokeStyle=w.strokeStyle,n.stroke()),w.fillStyle){var L=w.fillToBottom?o.height+T+1:l(0,0);n.lineTo(k,L),n.lineTo(V,L),n.fillStyle=w.fillStyle,n.fill()}n.restore()}}s.tooltip&&this.mouseX>=0&&(n.lineWidth=s.tooltipLine.lineWidth,n.strokeStyle=s.tooltipLine.strokeStyle,n.beginPath(),n.moveTo(this.mouseX,0),n.lineTo(this.mouseX,o.height),n.stroke()),this.updateTooltip();var W=s.labels;if(!W.disabled&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)){var E=s.yMaxFormatter(this.valueRange.max,W.precision),C=s.yMinFormatter(this.valueRange.min,W.precision),D=s.scrollBackwards?0:o.width-n.measureText(E).width-2,z=s.scrollBackwards?0:o.width-n.measureText(C).width-2;n.fillStyle=W.fillStyle,n.fillText(E,D,W.fontSize),n.fillText(C,z,o.height-2)}if(W.showIntermediateLabels&&!isNaN(this.valueRange.min)&&!isNaN(this.valueRange.max)&&s.grid.verticalSections>0){var I=(this.valueRange.max-this.valueRange.min)/s.grid.verticalSections,H=o.height/s.grid.verticalSections;for(u=1;u<s.grid.verticalSections;u++){c=o.height-Math.round(u*H);var X=s.yIntermediateFormatter(this.valueRange.min+u*I,W.precision),O=W.intermediateLabelSameAxis?s.scrollBackwards?0:o.width-n.measureText(X).width-2:s.scrollBackwards?o.width-n.measureText(X).width-2:0;n.fillText(X,O,c-s.grid.lineWidth)}}if(s.timestampFormatter&&s.grid.millisPerLine>0){var q=s.scrollBackwards?n.measureText(C).width:o.width-n.measureText(C).width+4;for(m=i-i%s.grid.millisPerLine;m>=r;m-=s.grid.millisPerLine){d=h(m,0);if(!s.scrollBackwards&&d<q||s.scrollBackwards&&d>q){var Y=new Date(m),j=s.timestampFormatter(Y),G=n.measureText(j).width;q=s.scrollBackwards?d+G+2:d-G-2,n.fillStyle=s.labels.fillStyle,s.scrollBackwards?n.fillText(j,d,o.height-2):n.fillText(j,d-G,o.height-2)}}}if(''!==s.title.text){n.font=s.title.fontSize+'px '+s.title.fontFamily;var J=s.scrollBackwards?o.width-n.measureText(s.title.text).width-2:2;if('bottom'==s.title.verticalAlign){n.textBaseline='bottom';var K=o.height}else if('middle'==s.title.verticalAlign){n.textBaseline='middle';K=o.height/2}else{n.textBaseline='top';K=0}n.fillStyle=s.title.fillStyle,n.fillText(s.title.text,J,K)}n.restore()}},s.timeFormatter=function(t){function e(t){return(t<10?'0':'')+t}return e(t.getHours())+':'+e(t.getMinutes())+':'+e(t.getSeconds())},t.TimeSeries=i,t.SmoothieChart=s}('undefined'==typeof exports?this:exports);"
"</script>"
#endif
"";
const char HTTP_STYLE_MAIN[] PROGMEM = "<style>.pic{animation:5s linear infinite rotate;}.v,.c,.p,.f,.e{margin-right:5px;text-align:end;font-weight:600;}body{text-align:center;font-family:verdana}div{padding:0;font-size:1em;margin:0;box-sizing:border-box}input[type='file']{width:100%;}.logo-cont{display:flex}.logo-text{display:inline;font-weight:700;color:#9303A7;font-size:30px;line-height:30px;padding-left:15px;margin-top:0}.wrap{text-align:left;display:inline-block;min-width:260px;max-width:500px;margin:5px}a{color:#333;font-weight:500;text-decoration:none}a:hover{color:#C038D3;text-decoration:none;}h1{background-color:#060606;color:#fff;}.tbl{display:flex}.value{width:150px;border:1px solid #eee;text-align:center;}.col{width:200px;border:1px solid #eee;text-align:center;}.grey{background-color:#ddd;}.cnt{margin:10px 10px 0 0;}"
".info{width:100%; text-align:end;font-size:.7em;padding-top:5px;}"
"@keyframes rotate{from{transform:rotate(0deg);}to{transform:rotate(360deg);}}"
"</style>";
const char HTTP_BODY_MAIN[] PROGMEM = "</head>"
"<body class='b'><div class='wrap'><div class='logo-cont'><div class='logo-img'><svg class='pic' fill='none' height='34' viewBox='0 0 34 34' width='34' xmlns='http://www.w3.org/2000/svg'><circle stroke='dodgerblue' stroke-width='4' r='15.0' cx='17.0' cy='17.0'></circle><rect fill='lightcoral' x='14' y='14' height='6' width='15' ry='3' transform='rotate(-40 17 17)'></svg></div><p class='logo-text'>eMeter</p><div class='info'><div>CPU <span id='freq'></span> MHz</div><div>memory: <span id='heap'></span>Kbyte</div><div>RSSI: <span id='rssi'></span> dBm</div><div><a href='/update'>firmware</a>: <span id='firmware'></span></div></div></div><div class='tbl'><div class='col grey'><p>Линия</p></div><div class='value grey'><p>U, В</p></div><div class='value grey'><p>I, А</p></div><div class='value grey'><p>P, Вт</p></div><div class='value grey'><p>Частота, Гц</p></div><div class='value grey'><p>Коэфф. мощн.</p></div></div><div class='tbl'><div class='col grey'><p>Фаза 1</p></div><div class='value'><p class='v' id='voltage'></p></div><div class='value'><p class='c' id='current'></p></div><div class='value'><p class='p' id='power'></p></div><div class='value'><p class='f' id='frequency'></p></div><div class='value'><p class='f' id='pf'></p></div></div><div class='tbl'><div class='col grey'><p>Максимум</p></div><div class='value'><p class='v' id='maxvoltage'></p></div><div class='value'><p class='c' id='maxcurrent'></p></div><div class='value'><p class='p' id='maxpower'></p></div><div class='value'><p class='f' id='maxfreq'></p></div><div class='value'><p class='f' id='maxpf'></p></div></div><div class='tbl'><div class='col grey'><p>Минимум</p></div><div class='value'><p class='v' id='minvoltage'></p></div><div class='value'><p class='c' id='mincurrent'></p></div><div class='value'><p class='p' id='minpower'></p></div><div class='value'><p class='f' id='minfreq'></p></div><div class='value'><p class='f' id='minpf'></p></div></div><div class='tbl'><span class='cnt'>Показания счетчика электроэнергии Т0:</span><span id='energy1' class='cnt'></span><span class='cnt'>кВт-ч</span></div><div class='tbl'><span class='cnt'>Показания счетчика электроэнергии Т1:</span><span id='energy2' class='cnt'></span><span class='cnt'>кВт-ч</span></div>"
#ifndef NOCHARTS
"<div style='padding-top:40px;' class='canvas'><canvas id='mycanvas' width='500' height='300'></canvas></div><script>!function(){var e=new TimeSeries,i=new TimeSeries,t=new TimeSeries,l=new TimeSeries,n=new TimeSeries,r=new TimeSeries,a=new TimeSeries;setInterval((function(){var s=parseFloat(_('voltage').innerHTML),S=parseFloat(_('current').innerHTML),d=parseFloat(_('power').innerHTML),m=parseFloat(_('frequency').innerHTML),f=100*parseFloat(_('pf').innerHTML),T=100*Math.ceil(Math.max(s,d,S)/100)+100;e.append((new Date).getTime(),s),i.append((new Date).getTime(),S),t.append((new Date).getTime(),d),l.append((new Date).getTime(),m),n.append((new Date).getTime(),f),r.append((new Date).getTime(),T),a.append((new Date).getTime(),-100)}),1e3);var s=new SmoothieChart({grid:{strokeStyle:'rgb(200, 200, 200)',fillStyle:'rgb(0, 0, 0)',lineWidth:1,millisPerLine:1e3,verticalSections:''},labels:{fillStyle:'rgb(255, 255, 255)'}});s.addTimeSeries(e,{strokeStyle:'#ff0000',fillStyle:'',lineWidth:2}),s.addTimeSeries(i,{strokeStyle:'#ff00ff',fillStyle:'',lineWidth:2}),s.addTimeSeries(t,{strokeStyle:'#ffff00',fillStyle:'',lineWidth:2}),s.addTimeSeries(l,{strokeStyle:'#00ff00',fillStyle:'',lineWidth:2}),s.addTimeSeries(n,{strokeStyle:'#0000ff',fillStyle:'',lineWidth:2}),s.addTimeSeries(r,{strokeStyle:'',fillStyle:'',lineWidth:0}),s.addTimeSeries(a,{strokeStyle:'',fillStyle:'',lineWidth:0}),s.streamTo(document.getElementById('mycanvas'),2e3)}();</script>"
#endif
"</div></body></html>";
const char HTTP_SCRIPT_UPDATE[] PROGMEM = "<script>"
"function upd(){const xhr=new XMLHttpRequest();xhr.open('GET','/load');xhr.send()}"
"</script>";
const char HTTP_STYLE_UPDATE[] PROGMEM = "<style>"
".update{background:#f0f8ff;padding:10px;text-align:center;display:block }.button{cursor:pointer;border:0;background-color:#9303a7;color:#fff;margin-top:20px;line-height:2rem;font-size:1.2rem;border-radius:1rem;width:60% }button:active{opacity:50% !important;cursor:wait;transition-delay:0s}button:hover{background-color:#C038D3;}"
".loader{display:inline-block;border:3px solid #fff;border-top:3px solid #C038D3;border-radius:50%;width:40px;height:40px;margin-top:18px;animation: rotate 2s linear infinite;}.msg{display: block;}"
"</style>";
const char HTTP_BODY_UPDATE[] PROGMEM = ""
"<body class='b'><div class='wrap'><div class='logo-cont'><div class='logo-img'><svg class='pic' fill='none' height='34' viewBox='0 0 34 34' width='34' xmlns='http://www.w3.org/2000/svg'><circle stroke='dodgerblue' stroke-width='4' r='15.0' cx='17.0' cy='17.0'></circle><rect fill='lightcoral' x='14' y='14' height='6' width='15' ry='3' transform='rotate(-40 17 17)'></svg></div><p class='logo-text'>eMeter</p></div><div id='upd' class='update'>"
"<div><span id='msg'></span><span id='ver'></span></div><div><div id='loader' class='loader'></div></div><button id='btn-upd' class='button'>Назад</button>"
"</div></div></body></html>";

#endif